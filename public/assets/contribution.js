function clearInfo(){$("#new_contribution input").each(function(){$(this).data("stripe")&&$(this).val("")})}function revealLoading(){$("html, body").animate({scrollTop:0},"slow"),$(".loading").fadeIn();var n=$(".loading .inner-content"),e=0;myCounter=setInterval(function(){e++,3>e?n.append(" . "):(n.html("We're processing your donation<br>"),e=0)},600)}function hideLoading(){$(".loading").fadeOut()}function setModalHeight(){var n=$("body").innerHeight();$(".loading").css("height",n)}var stripeResponseHandler=function(n,e){var i=$("#new_contribution");if(e.error)i.find(".payment-errors").text(e.error.message),i.find("button").prop("disabled",!1).removeClass("disabled"),hideLoading();else{var t=e.id;i.append($('<input type="hidden" name="contribution[stripe_token]" />').val(t)),clearInfo(),i.get(0).submit()}};jQuery(function(n){setModalHeight(),n("#new_contribution").submit(function(){n("#errorExplanation").html("");var e=n("#contribution_first_name").val(),i=n("#contribution_last_name").val(),t=n("#contribution_email").val(),o=n("#contribution_amount").val(),r=n("#contribution_address_zip").val();if(e&&i&&t&&o&&r){var a=n(this);return a.find("button").prop("disabled",!0).addClass("disabled"),revealLoading(),Stripe.createToken(a,stripeResponseHandler),!1}return n(".validation-errors").html("*All fields are required"),clearInfo(),!1})});